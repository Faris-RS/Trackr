<section class="py-1">
  <div class="w-full px-4 mx-auto mt-6">
    <div
      class="relative flex flex-col min-w-0 break-words w-full mb-6 rounded-lg border-0"
    >
      <div class="rounded-t mb-0 px-6 py-6">
        <div class="text-center flex justify-between">
          <h6 class="text-black text-6xl font-bold">Return Rented Vehicle</h6>
          <fa-icon
            [icon]="cancel"
            size="2x"
            class="text-indigo-500 cursor-pointer"
            (click)="close()"
          ></fa-icon>
        </div>
        <hr class="mt-10 text-indigo-500" />
      </div>
      <div class="flex-auto px-4 lg:px-10 py-10 pt-0" *ngIf="vehicleData">
        <form (ngSubmit)="onSubmit()">
          <div class="flex flex-wrap">
            <div class="w-full px-4">
              <div class="relative w-full mb-3 flex">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Vehicle Name:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ vehicleData.vehicleName }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Insurance Expiry:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ getFormattedDate(vehicleData.insuranceExpiry) }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Vehicle Model Year:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ vehicleData.vehicleYear }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Registration Number:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ vehicleData.registrationNumber }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Rented Date:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ getFormattedDate(vehicleData.rentedDate) }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Return Date:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ getFormattedDate(vehicleData.returnDate) }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Rate per week:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ vehicleData.rate }}</span
                  >
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Total weeks rented: &nbsp;</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    <input
                      type="number"
                      name="weeks"
                      class="border-0 px-3 py-3 w-1/3 text-indigo-500 bg-white rounded text-sm shadow focus:outline-none focus:ring ease-linear transition-all duration-150"
                      [(ngModel)]="weeks"
                      (ngModelChange)="calculateTotal()"
                      min="1"
                    />
                  </span>
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Return Date: &nbsp;</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    <input
                      type="date"
                      name="returnDate"
                      class="border-0 px-3 py-3 w-1/3 text-indigo-500 bg-white rounded text-sm shadow focus:outline-none focus:ring ease-linear transition-all duration-150"
                      [(ngModel)]="returnDate"
                      [max]="todayFormatted"
                    />
                  </span>
                  <span class="text-xs text-gray-600 ml-2 uppercase">
                    If no date is selected, it assumed to be today.
                  </span>
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Fines: &nbsp;</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    <input
                      type="number"
                      name="fines"
                      class="border-0 px-3 py-3 w-1/3 text-indigo-500 bg-white rounded text-sm shadow focus:outline-none focus:ring ease-linear transition-all duration-150"
                      [(ngModel)]="fines"
                      (ngModelChange)="calculateTotal()"
                      min="0"
                    />
                  </span>
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Total price:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ total }}
                  </span>
                </label>
              </div>
            </div>
            <div class="w-full px-4">
              <div class="relative w-full mb-3">
                <label>
                  <span class="uppercase text-gray-600 font-bold mb-2"
                    >Rented by:</span
                  >
                  <span class="text-indigo-500 font-bold mb-2">
                    {{ vehicleData.rentedBy }}</span
                  >
                </label>
              </div>
            </div>
          </div>
          <div class="px-4">
            <button
              class="bg-indigo-500 w-full mt-10 text-white active:bg-indigo-600 font-bold uppercase text-xs px-4 py-3 rounded outline-none focus:outline-none mr-1 ease-linear transition-all duration-150"
              type="submit"
            >
              Confirm
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</section>

<!-- Spinner Modal -->
<div
  *ngIf="loading"
  class="fixed top-0 bg-white left-0 z-50 flex items-center justify-center w-full h-full bg-opacity-40"
>
  <app-spinner></app-spinner>
</div>
